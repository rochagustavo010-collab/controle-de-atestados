// Adicione esta função dentro do seu componente App
const atualizarStatus = async (fileName, novoStatus) => {
    setLoading(true);
    const partes = fileName.split('-');
    
    // Altera apenas a parte do status (ex: ST1 para ST2)
    partes[1] = `ST${novoStatus}`;
    const novoNome = partes.join('-');

    try {
        // O Supabase não "renomeia" diretamente, então copiamos e deletamos o antigo
        const { error: copyError } = await supabaseClient.storage
            .from('atestados')
            .copy(fileName, novoNome);

        if (copyError) throw copyError;

        await supabaseClient.storage.from('atestados').remove([fileName]);
        
        loadFiles(); // Recarrega a lista para mostrar a mudança
    } catch (error) {
        alert("Erro ao atualizar status: " + error.message);
    }
    setLoading(false);
};

// ... dentro do seu map de arquivos, altere os botões para:
<div className="flex gap-2">
    <button 
        onClick={() => atualizarStatus(f.name, 1)}
        className={`btn-status ${status >= 1 ? 'active' : ''}`}>
        Recebido Foto
    </button>
    <button 
        onClick={() => atualizarStatus(f.name, 2)}
        className={`btn-status ${status >= 2 ? 'active' : ''}`}>
        Subiu Form
    </button>
    <button 
        onClick={() => atualizarStatus(f.name, 3)}
        className={`btn-status ${status >= 3 ? 'active' : ''}`}>
        Físico
    </button>
    <button 
        onClick={() => atualizarStatus(f.name, 4)}
        className={`btn-status ${status >= 4 ? 'active' : ''}`}>
        Entregue DP
    </button>
</div>
